<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Simulation Modeling Functions · MCHammer.jl</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-3913053-5', 'auto');
ga('send', 'pageview', {'page': location.pathname + location.search + location.hash});
</script><link rel="canonical" href="https://etorkia.github.io/MCHammer.jl/dev/manual/1_functions/index.html"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="MCHammer.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit">MCHammer.jl</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">MCHammer.jl</a></li><li class="is-active"><a class="tocitem" href>Simulation Modeling Functions</a><ul class="internal"><li><a class="tocitem" href="#Overview-1"><span>Overview</span></a></li><li><a class="tocitem" href="#Functions-1"><span>Functions</span></a></li></ul></li><li><a class="tocitem" href="../2_charts/">Charting Functions</a></li><li><a class="tocitem" href="../3_time_series/">Time-Series Simulation</a></li><li><a class="tocitem" href="../4_moving_results/">Importing and Exporting Simulation Results</a></li><li><a class="tocitem" href="../../tutorials/1_first_model/">Building your first model</a></li><li><a class="tocitem" href="../../tutorials/2_Correlated_Model/">Correlating Variables in Your Model</a></li><li><a class="tocitem" href="../../tutorials/3_NPV_testmodel/">Simulated NPV with Time-Series</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Simulation Modeling Functions</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Simulation Modeling Functions</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="github.com/etorkia/MCHammer.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Simulation-Modeling-Functions-1"><a class="docs-heading-anchor" href="#Simulation-Modeling-Functions-1">Simulation Modeling Functions</a><a class="docs-heading-anchor-permalink" href="#Simulation-Modeling-Functions-1" title="Permalink"></a></h1><h2 id="Overview-1"><a class="docs-heading-anchor" href="#Overview-1">Overview</a><a class="docs-heading-anchor-permalink" href="#Overview-1" title="Permalink"></a></h2><p>Though most of your modeling can be realized in raw Julia, some of the most important features in a Monte-Carlo simulation package have to do with analyzing and applying correlation in models. MCHammer&#39;s correlation approach is based on <em>&quot;Ronald L. Iman &amp; W. J. Conover (1982) A distribution-free approach to inducing rank correlation among input variables, Communications in Statistics - Simulation and Computation&quot;</em></p><p>The simulation and correlation functions are designed to quickly obtain risk and decision analysis metrics such as moments, percentiles and risk over time.</p><h2 id="Functions-1"><a class="docs-heading-anchor" href="#Functions-1">Functions</a><a class="docs-heading-anchor-permalink" href="#Functions-1" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="MCHammer.cormat" href="#MCHammer.cormat"><code>MCHammer.cormat</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">cormat(ArrayName, RankOrder=1)</code></pre><p>Cormat calculates a symetric correlation matrix using both PPMC and Rank Order. Rank Order is default because this is what it used in the Iman-Conover method for correlating of simulated variables.</p><p><strong>RankOrder = 1</strong> calculates the Spearman rank order correlation used in MCHammer (this argument is optional and defaults to Spearman)</p><p><strong>RankOrder = 0</strong> calculates the Pearson Product Moment Correlation</p></div><a class="docs-sourcelink" target="_blank" href="github.com/etorkia/MCHammer.jl">source</a></section></article><pre><code class="language-julia">Random.seed!(1) #hide
test = rand(Normal(),1000,5)
cormat(test)

# output

5×5 Array{Float64,2}:
  1.0         0.045012   0.00247197  -0.0455839   0.0126131
  0.045012    1.0        0.0534       0.0449149   0.0219751
  0.00247197  0.0534     1.0          0.0194396   0.0504692
 -0.0455839   0.0449149  0.0194396    1.0        -0.0301272
  0.0126131   0.0219751  0.0504692   -0.0301272   1.0</code></pre><article class="docstring"><header><a class="docstring-binding" id="MCHammer.covmat" href="#MCHammer.covmat"><code>MCHammer.covmat</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">covmat(ArrayName)</code></pre><p>Calculates the covariance matrix.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/etorkia/MCHammer.jl">source</a></section></article><pre><code class="language-julia">covmat(test)

# output

5×5 Array{Any,2}:
  1.00069    0.0286309  0.0102903  -0.0356815   0.0132867
  0.0286309  1.09233    0.0598539   0.0536936   0.0216141
  0.0102903  0.0598539  1.07241     0.0140108   0.0583517
 -0.0356815  0.0536936  0.0140108   0.942015   -0.0240827
  0.0132867  0.0216141  0.0583517  -0.0240827   1.02767</code></pre><article class="docstring"><header><a class="docstring-binding" id="MCHammer.corvar" href="#MCHammer.corvar"><code>MCHammer.corvar</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">corvar(ArrayName, n_trials, correl_matrix)</code></pre><p>The corvar function correlates simulation inputs unsing the Iman Conover Method. Your array must contain &gt;2 simulated inputs. <strong>Remember to hcat() your inputs into tables reflecting your input correlation matrices.</strong></p><p><strong>n_trials</strong>: is the number of trials in the simulation. This must be consistent.</p><p><strong>correl_matrix</strong>: must be defined as a Square Positive Definite correlation matrix. This can be calculated from histroical data using <code>cormat()</code> function.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/etorkia/MCHammer.jl">source</a></section></article><pre><code class="language-julia">Random.seed!(1)
n_trials = 1000
sample_data = [rand(LogNormal(0, 0.5),n_trials) rand(Normal(3,2),n_trials) rand(Gamma(1, 0.5),n_trials) rand(LogNormal(0, 0.5),n_trials) rand(Normal(3,2),n_trials) rand(Gamma(1, 0.5),n_trials)]

test_cmatrix = [1 0 0 0 0 0; 0 1 0 0 0 0; 0 0 1 0 0 0;0 0 0 1 0.75 -0.7; 0 0 0 0.75 1 -0.95; 0 0 0 -0.7 -0.95 1 ]

Random.seed!(1)
cormat(corvar(sample_data, n_trials, test_cmatrix))

# output

6×6 Array{Float64,2}:
  1.0          0.045012    0.00247197  -0.0455839  -0.0138308   0.0112554
  0.045012     1.0         0.0534       0.0449149   0.0592791  -0.0355262
  0.00247197   0.0534      1.0          0.0194396   0.0532426  -0.0468971
 -0.0455839    0.0449149   0.0194396    1.0         0.719585   -0.662708
 -0.0138308    0.0592791   0.0532426    0.719585    1.0        -0.939008
  0.0112554   -0.0355262  -0.0468971   -0.662708   -0.939008    1.0</code></pre><article class="docstring"><header><a class="docstring-binding" id="MCHammer.GetCertainty" href="#MCHammer.GetCertainty"><code>MCHammer.GetCertainty</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">GetCertainty(ArrayName, x, AboveBelow=0)</code></pre><p>This function returns the percentage of trials Above (1) or Below(0) a target value of x.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/etorkia/MCHammer.jl">source</a></section></article><pre><code class="language-julia">Random.seed!(1)
test = rand(Normal(),1000)

GetCertainty(test, 0, 1)

# output

0.502</code></pre><article class="docstring"><header><a class="docstring-binding" id="MCHammer.fractiles" href="#MCHammer.fractiles"><code>MCHammer.fractiles</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">fractiles(ArrayName, Increment=0.1)</code></pre><p>The fractiles function calculates percentiles at equal increments. The default optional argument for Increments is 0.1 for deciles but can be set to anything such as 0.05 for quintiles or 0.01 for percentiles.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/etorkia/MCHammer.jl">source</a></section></article><pre><code class="language-julia">fractiles(test)

# output

11×2 Array{Any,2}:
 &quot;P0.0&quot;    -3.882
 &quot;P10.0&quot;   -1.34325
 &quot;P20.0&quot;   -0.860748
 &quot;P30.0&quot;   -0.526089
 &quot;P40.0&quot;   -0.274806
 &quot;P50.0&quot;    0.00474446
 &quot;P60.0&quot;    0.218685
 &quot;P70.0&quot;    0.472055
 &quot;P80.0&quot;    0.800966
 &quot;P90.0&quot;    1.2504
 &quot;P100.0&quot;   3.12432</code></pre><article class="docstring"><header><a class="docstring-binding" id="MCHammer.cmd" href="#MCHammer.cmd"><code>MCHammer.cmd</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">cmd(x)</code></pre><p>Shell /Dos Command wrapper to run batch and shell commands in script. This is used to process SQL from the command line or perform system level operation in a script using a command prompt.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/etorkia/MCHammer.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="MCHammer.truncate_digit" href="#MCHammer.truncate_digit"><code>MCHammer.truncate_digit</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">function  truncate_digit(num, digits=2)</code></pre><p>Truncation algorithim to remove decimals (ported by anonymous author from Maple) e.g.</p><pre><code class="language-none">  0.066 = 0.06
  0.063 = 0.06</code></pre></div><a class="docs-sourcelink" target="_blank" href="github.com/etorkia/MCHammer.jl">source</a></section></article><pre><code class="language-julia">Result_1 = truncate_digit(0.667)
Result_2 = truncate_digit(0.661)
Result_1 == Result_2

# output
true</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../">« MCHammer.jl</a><a class="docs-footer-nextpage" href="../2_charts/">Charting Functions »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 3 December 2019 23:14">Tuesday 3 December 2019</span>. Using Julia version 1.0.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
